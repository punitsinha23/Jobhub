{% extends "base.html" %}

{% block title %}Home | JobHub{% endblock %}

{% block content %}

<div class="container" style="margin-top: 5%;">
  <form class="d-flex flex-wrap justify-content-center" method="POST" action="{% url 'home' %}">
    {% csrf_token %}
    
  
    <div class="input-group mb-2 me-2 flex-fill" style="max-width: 300px;">
      <span class="input-group-text">Job</span>
      <input type="text" class="form-control" placeholder="Search jobs" aria-label="Job title" name="job" value="{{ job_query }}">
    </div>

    <div class="input-group mb-2 me-2 flex-fill" style="max-width: 300px;">
      <span class="input-group-text">Location</span>
      <input type="text" class="form-control" placeholder="Location" aria-label="location" name="location" value="{{ location }}">
    </div>

    <div class="input-group mb-2 me-2 flex-fill" style="max-width: 200px;">
      <span class="input-group-text">Site</span>
      <select class="form-select" name="site">
        <option value="linkdin" {% if selected_site == 'linkdin' %}selected{% endif %}>Linkdin</option>
        <option value="remoteok" {% if selected_site == 'remoteok' %}selected{% endif %}>RemoteOK</option>
        <option value="timesjobs" {% if selected_site == 'timesjobs' %}selected{% endif %}>TimesJobs</option>
        <option value="internshala" {% if selected_site == 'internshala' %}selected{% endif %}>Internshala</option>
        <option value="indeed" {% if selected_site == 'indeed' %}selected{% endif %}>Indeed</option>
        <option value="weworkremotely" {% if selected_site == 'weworkremotely' %}selected{% endif %}>We Work Remotely</option>
      </select>
    </div>

    <button class="btn btn-warning mb-2" style="background-color:orange; font-weight: bold; color:white" type="submit">
      Search
    </button>
  </form>
</div>

{% if results %}
<div class="mt-5 container">
  <h3 class="text-center mb-4">Results for <span style="color:#ff8c00;">"{{ job_query }}"</span> on {{ selected_site|capfirst }}</h3>
  
  <div class="d-flex flex-column align-items-center">
    {% for job in results %}
    <div class="job-card mb-4 w-75 p-3 d-flex justify-content-between align-items-center flex-wrap">
      <div class="flex-fill">
        <h5 class="card-title">{{ job.title|default:"No Title" }}</h5>
        <p class="card-text mb-1"><strong>Company:</strong> {{ job.company|default:"Unknown" }}</p>
        {% if job.location %}
        <p class="card-text mb-1"><strong>Location:</strong> {{ job.location }}</p>
        {% endif %}
        {% if job.posted %}
        <p class="card-text mb-1"><strong>Posted:</strong> {{ job.posted }}</p>
        {% endif %}
      </div>
      <div class="mt-2 mt-md-0">
        <a href="{{ job.url|default:'#' }}" target="_blank" class="btn btn-warning">Apply</a>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% elif job_query %}
<div class="mt-5 text-center text-muted">
  No results found for "{{ job_query }}" on {{ selected_site|capfirst }}.
</div>
{% endif %}

<style>
/* Page Background */
body {
  background: linear-gradient(160deg, #f0f4f8, #e0e7ef);
  color: #333;
}

/* Job Card Styling */
.job-card {
  background-color: #f9f9f9;
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  width: 100%;
}
.job-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 30px rgba(0,0,0,0.15);
}
.card-title {
  font-size: 1.3rem;
  font-weight: 600;
}
.card-text {
  font-size: 0.95rem;
}

/* Buttons */
.job-card a.btn {
  background-color: #ff8c00;
  color: #fff;
  font-weight: 600;
  transition: background-color 0.2s ease;
}
.job-card a.btn:hover {
  background-color: #e07b00;
  color: #fff;
}

/* Responsive */
@media (max-width: 576px) {
  form .input-group {
    max-width: 100% !important;
  }
  .job-card {
    flex-direction: column !important;
    align-items: flex-start !important;
  }
  .job-card a {
    align-self: flex-end;
    margin-top: 10px;
  }
}
</style>
{% endblock %}
